# author: Fabian Buske
# date: September 2013

#####################################
# Resources
#####################################

#********************
# Tasks
#********************
RUNCHIPSEQSHARP="1"    # ChIP-seq pipeline for sharp peaks (TF)

#********************
# Paths
#********************

SOURCE=$(pwd)

# which folder to run on (i.e. folders within fastq directory)
declare -a DIR; DIR=( sample1 sample2 )

# folder/task containing the data this task operates on
INPUT_BOWTIE="fastq"

# folder/task containing the data this task operates on
INPUT_MACS2=$TASKBOWTIE

# folder/task containing the data this task operates on
INPUT_MEMECHIP=$TASKMACS2

# folder/task containing the data this task operates on
INPUT_CHANCE=$TASKBOWTIE

# folder/task containing the data this task operates on
INPUT_BIGWIG=$TASKBOWTIE

# where to write the output
OUT=$SOURCE

# where to write the log files
QOUT=$OUT/qout

#********************
# PARAMETER (mandatory)
#********************

# fastq file suffix
FASTQ="fq.gz"

# read indicator immediately preceding the fastq file suffix
READONE="_R1"
READTWO="_R2"

# reference genome, 
# e.g. /share/ClusterShare/biodata/contrib/genomeIndices_garvan/iGenomes/Homo_sapiens/UCSC/hg19/Sequence/BowtieIndex/genome.fa
FASTA=

# library tags
EXPID="Celltype"
LIBRARY="ChIPseq"
PLATFORM="Illumina"

# bed file suffix
BED="_summit.bed"

# Genome size for MACS2 (GSIZE parameter)
# e.g. 2.7e9 for human, 1.87e9 for mouse
MACS2_GENOMESIZE=2.7e9

# location of the input (control) for the chip experiments (bam file)
CHIPINPUT=

# Genome Assembly
# e.g. "hg19"
GENOME_ASSEMBLY=

#********************
# PARAMETER (optional overwriting defaults)
#********************

# FASTQ encoding (Phred score), leave empty to detect automatically
# e.g. "--phred33-quals", "--phred64-quals"
FASTQ_PHRED=

# additional bowtie parameters
BOWTIEADDPARAM="-v 3 -m 1 --tryhard --best --strata --time"

# if bwa was used to map file then set TASKBOWTIE to TASKBWA
#TASKBOWTIE=$TASKBWA

# additional MACS parameters, for callpeak
# e.g. "--broad"
MACS2_CALLPEAK_ADDPARAM=

# method to use in bedgraph compare
MACS2_BDGCMP_METHOD=ppois

#Additional MACS parameters, for bdgcmp (only relevant when input is specified)
CS2_BDGCMP_ADDPARAM=

# additional MACS parameters, for refinepeak
MACS2_REFINEPEAK_ADDPARAM=

# extend regions by this number of basepairs (e.g. pad the summit by x bp either side)
SLOPBEDADDPARAM="-b 100"

# location of the background file (otherwise generated from the peak file)
MEMEBACKGROUNDFILE=

# background model generation  parameter to pass to fasta-get-markov
FASTAGETMARKOVADDPARAM=

# additional  parameters to pass to meme
MEMECHIPADDPARAM="-nmeme 1000 -meme-nmotifs 1 -dreme-m 3 -centrimo-local -centrimo-noseq -meme-mod zoops"

# additional parameters to pass to fimo
FIMOADDPARAM="--qv-thresh --thresh 0.05 --motif 0"

# folder containing the memechip databases 
# MEMECHIPDATABASES=


# Encode Experiment id
# e.g. "H2k4me2"
EXPERIMENTID=

# OR
# a sed pattern that specifies what part of the filename that corresponds to the IP factor
# e.g.: 's/^([A-Z][a-z0-9]+){2}([A-Z][a-z0-9]+)[A-Z].*/\2/p' 
#> echo "HaibTfbsEgr1V0416102Rep2.mul.bam" | sed -rn 's/^([A-Z][a-z0-9]+){2}([A-Z][a-z0-9]+)[A-Z].*/\2/p' 
#> Egr1
EXPERIMENTPATTERN=

# Fragment length to extend reads downstream  - only relevant for single-end libraries during bigwig generation
# Fragment length of -1 will use the genomic fragment covered by the read-mates if the input is a paired read library
FRAGMENTLENGTH=0

# uncomment to generate strand-specific bigwig files
#BIGWIGSTRANDS=strand-specific


#WALLTIME_BOWTIE=10:00:00
#MEMORY_BOWTIE=60
#CPU_BOWTIE=8
#NODES_BOWTIE="nodes=1:ppn=8"
#MODULE_BOWTIE=
#PATH_BOWTIE=

#WALLTIME_MACS2=12:00:00
#MEMORY_MACS2=20
#CPU_MACS2=1
#NODES_MACS2="nodes=1:ppn=1"
#MODULE_MACS2=
#PATH_MACS2=

#WALLTIME_MEMECHIP=24:00:00
#MEMORY_MEMECHIP=60
#CPU_MEMECHIP=8
#NODES_MEMECHIP="nodes=1:ppn=8"
#MODULE_MEMECHIP=
#PATH_MEMECHIP=

#WALLTIME_CHANCE=10:00:00
#MEMORY_CHANCE=20
#CPU_CHANCE=2
#NODES_CHANCE="nodes=1:ppn=2"
#MODULE_CHANCE=""
#PATH_CHANCE=

#WALLTIME_BIGWIG=10:00:00
#MEMORY_BIGWIG=60
#CPU_BIGWIG=1
#NODES_BIGWIG="nodes=1:ppn=1"
#MODULE_BIGWIG=
#PATH_BIGWIG=
